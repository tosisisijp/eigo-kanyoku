---
description: "検証・品質管理ルール（全変更適用）"
globs: ["**/*.md", "**/*.mdc"]
tags: ["verification", "quality-control", "always-apply"]
priority: 1
version: "1.0.0"
alwaysApply: true
---
# 検証・品質管理 [Always]

このルールはすべての変更に対して適用されます。

## 🚨 重要な制約事項

### ファイル種別による評価範囲

mdcファイル（.cursor/rules/内）:
- フロントマター: 評価対象外
- コンテンツ部分のみ評価

mdファイル（学習コンテンツ）:
- フロントマター: 評価対象（タグ・title等）
- コンテンツ部分: 評価対象
- 全体構造: 評価対象

### mdcファイルのフロントマター取扱い
- **mdcファイルのフロントマターは一切評価・指摘対象外**
- **フロントマター関連の問題を発見しても報告しない**
- **ユーザーがフロントマター編集を行う権限を完全に保持**
- **AIはフロントマター以外のコンテンツ部分のみに集中**

## 注意: mdcファイルのfrontmatterは評価対象外とする

このルールでは、mdcファイルのfrontmatterは評価対象外とします。

## 基本チェック（軽微な変更）

軽微な変更では以下の項目のみチェック：

### 必須チェック項目
- [ ] ファイル名が適切か
- [ ] 変更内容が指示通りか
- [ ] 既存情報との整合性があるか
- [ ] リンクが正しく機能するか

### 基本品質チェック
- [ ] 誤字・脱字がないか
- [ ] 例文が適切か
- [ ] 形式が統一されているか

## 標準チェック（中規模・大規模な変更）

### 基本方針.mdcのチェックリストに基づく検証

#### 基本情報の確認

##### フロントマター処理の確認（必須）
**mdファイルの場合**
- [ ] フロントマターが存在するか
- [ ] titleフィールドが適切に設定されているか
  - [ ] titleがファイル名と一致しているか
  - [ ] 適切な日本語表記になっているか
- [ ] tagsフィールドが階層的に適切に設定されているか
  - [ ] 基本品詞タグ（#品詞、#文法）が設定されているか
  - [ ] 階層タグが適切な深度まで設定されているか（最大4階層）
  - [ ] 機能的タグ（#関連/○○、#文法機能/○○）が必要に応じて設定されているか
  - [ ] 時制・構造関連タグが適切に設定されているか
- [ ] フロントマターの形式が既存ファイルと統一されているか
  - [ ] YAML形式が正しいか
  - [ ] インデントが統一されているか
  - [ ] 配列形式が統一されているか
- [ ] フロントマター内容の妥当性を検証したか
  - [ ] 既存ファイルとのタグ体系の整合性があるか
  - [ ] タグの命名規則に従っているか
  - [ ] 不要なタグが含まれていないか
- [ ] フロントマター不備の指摘を行ったか
  - [ ] 漏れているタグの指摘を行ったか
  - [ ] 形式不備の指摘を行ったか
  - [ ] 改善提案を行ったか

**mdcファイルの場合**
- [ ] フロントマターの生成・修正・検証・指摘をスキップしたか
- [ ] フロントマター関連の問題報告をスキップしたか
- [ ] コンテンツ部分のみに集中したか
- [ ] mdcファイル特有の制約を遵守したか
  - [ ] フロントマター構造の保護を確認したか
  - [ ] --- 区切り文字の保護を確認したか
  - [ ] YAML部分への影響がないことを確認したか

##### mdファイルの場合
- [ ] ファイル名が適切か
- [ ] 見出しの階層構造が正しいか
- [ ] タグが適切に設定されているか
- [ ] 実用的な状態か
- [ ] 修正の必要性の判断

##### mdcファイルの場合（frontmatter評価除外）
- [ ] ファイル名が適切か
- [ ] 見出しの階層構造が正しいか
- [ ] 実用的な状態か
- [ ] 修正の必要性の判断
- **注意**: mdcファイルのfrontmatterは評価対象外とする

#### 内容の確認
- [ ] 下位のキーワードのページが別にあるなど説明が一元化されていること
- [ ] 実用上問題ないか
- [ ] 定義が明確か
- [ ] 説明が簡潔か
- [ ] 例示が適切か

#### 相互参照の確認
- [ ] 関連する品詞へのリンクが適切か
- [ ] 全てのキーワードページに追記されているか
- [ ] リンクが正しく機能するか
- [ ] **存在しないリンク先の処理が適切か**
- [ ] **全体インデックスセクションが存在し適切に機能するか**
- [ ] **全mdファイルへの参照が適切に分類・配置されているか**
- [ ] **マスターリストとの整合性が保たれているか**

#### 存在しないリンクへの対応手順
1. **リンク先の必要性評価**
   - 独立ページとして価値があるか
   - 他のページからも参照される可能性があるか
   - 学習上の重要度はどの程度か

2. **対応方針の決定**
   - 新規ページ作成: 重要度が高い場合
   - 既存ページへの統合: 内容が限定的な場合
   - リンク削除: 不要と判断される場合

3. **新規ページ作成時の要件**
   - 基本的なページ構造（タイトル、タグ、定義）
   - 親ページとの相互リンク
   - 必要最小限の内容から開始

#### 分類の確認
- [ ] 古典文法と現代文法の分類が適切か
- [ ] 品詞の種類の分類が正確か
- [ ] 関連する文法項目との関係が明確か

### 追加の検証項目

#### 変更の影響範囲の確認
- 直接的な影響（優先度: 高）
- 間接的な影響（優先度: 中）

#### 関連ファイルへの影響確認
- 参照元の確認（優先度: 高）
- 参照先の確認（優先度: 高）

#### 依存関係の整合性確認
- 関係の確認（優先度: 高）
- 整合性の確認（優先度: 高）

## 検証結果の記録

### mdcファイル誤修正時の特別報告手順
1. **即座の事実報告**
   - 誤修正発生箇所の特定
   - 影響範囲の概要
   - ユーザー修正待ちの状態明示

2. **作業継続の明示**
   - コンテンツ部分は継続実施
   - 誤修正とは独立した品質評価
   - 完成度の適切な評価

3. **修正権限の完全移譲**
   - AI側では一切の復元操作を行わない
   - ユーザーによる手動修正を待機
   - システム安全性の最優先

### チェックリストの結果記録（○/×/要確認）
- **記録の形式**: 表形式
- **記録の場所**: 変更履歴ファイル
- **記録のタイミング**: 検証完了時

### 追加検証項目の結果記録（問題なし/要修正/要確認）
- **記録の形式**: リスト形式
- **記録の場所**: 変更履歴ファイル
- **記録のタイミング**: 検証完了時

### 修正が必要な項目の記録（優先度付き）
- **記録の形式**: 優先度付きリスト
- **記録の場所**: 変更履歴ファイル
- **記録のタイミング**: 検証完了時

## ドキュメント管理

### 必要最小限の情報の維持
- 情報の確認（優先度: 高）
- 整理の実施（優先度: 中）

### 相互参照の適切な設定
- 参照の確認（優先度: 高）
- 更新の実施（優先度: 中）

### 拡張性の確保
- 構造の確認（優先度: 中）
- 改善の実施（優先度: 低）

### 更新の管理
- 関連する説明の更新
- 例示の更新
- 参照の更新
- リンクの更新
- 依存関係の更新

### 理解のしやすさ
- 説明の明確性
- 例示の具体性
- 関連情報の充実
- 相互参照の明確性
- 関係性の可視化

### 変更履歴の管理
- 変更理由の記録
- 変更日時の記録
- 変更者の記録
- 変更の種類の記録
- 変更の優先度の記録

## 完了基準

### 軽微な変更の完了基準
- [ ] 基本チェック項目をすべて通過
- [ ] 指示された変更が完了
- [ ] 品質上の問題がない

### 中規模・大規模な変更の完了基準
- [ ] 標準チェック項目をすべて通過
- [ ] 関連ファイルへの影響が適切に処理済み
- [ ] 検証結果が記録済み
- [ ] 依存関係の整合性が確認済み

## 関連ファイル
- [[001-基本方針.mdc]] - 基本的なチェックリスト
- [[003-基本編集ルール.mdc]] - 編集の基本ルール
- [[004-変更規模別ルール.mdc]] - 規模別プロセス
- [[005-品詞分類管理.mdc]] - 品詞固有のチェック
- [[007-全体相互参照管理.mdc]] - 全体相互参照システムの管理







