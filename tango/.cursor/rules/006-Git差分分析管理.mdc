---
description:
globs:
alwaysApply: false
---
# Gitå·®åˆ†åˆ†æç®¡ç† [Conditional]

ã“ã®ãƒ«ãƒ¼ãƒ«ã¯Gitå·®åˆ†ã®å–å¾—ãƒ»åˆ†æãƒ»æ´»ç”¨ã«é–¢ã™ã‚‹æ±ç”¨çš„ãªãƒ«ãƒ¼ãƒ«ã§ã™ã€‚

## åŸºæœ¬æ–¹é‡

### Gitå·®åˆ†åˆ†æã®ç›®çš„
- **å¤‰æ›´å†…å®¹ã®å¯è¦–åŒ–**: ã‚³ãƒŸãƒƒãƒˆé–“ã®å·®åˆ†ã‚’æ˜ç¢ºã«æŠŠæ¡
- **å½±éŸ¿ç¯„å›²ã®ç‰¹å®š**: å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ»è¡Œæ•°ã®æ­£ç¢ºãªæŠŠæ¡
- **å“è³ªç®¡ç†æ”¯æ´**: å¤‰æ›´å†…å®¹ã®å¦¥å½“æ€§ç¢ºèª
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°æ”¯æ´**: å¤‰æ›´ã«åŸºã¥ãé–¢é€£æ–‡æ›¸ã®æ›´æ–°åˆ¤å®š

### é©ç”¨æ¡ä»¶
- ã‚³ãƒŸãƒƒãƒˆå‰ã®å¤‰æ›´å†…å®¹ç¢ºèªæ™‚
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã®åˆ¤å®šæ™‚
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ã®åˆ†ææ™‚
- å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã§ã®å¤‰æ›´ç¢ºèªæ™‚

## PowerShellå®Ÿè¡Œæ™‚ã®å‰ææ¡ä»¶

### PSReadLineç„¡åŠ¹åŒ–ã®å¿…é ˆå®Ÿè¡Œ
**é‡è¦**: ã“ã®ãƒ«ãƒ¼ãƒ«ã§PowerShellã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€**[[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]]** ã®ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå°‚ç”¨è¨­å®šã€ã‚’å‚ç…§ã—ã¦PSReadLineç„¡åŠ¹åŒ–ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

```powershell
# å¿…é ˆ: PowerShellå®Ÿè¡Œå‰ã®å®‰å®šåŒ–å‡¦ç†
# è©³ç´°ã¯ [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] ã‚’å‚ç…§
Remove-Module PSReadLine -Force -ErrorAction SilentlyContinue
```

### å®‰å®šåŒ–ã®ç†ç”±
- **PSReadLineã‚¨ãƒ©ãƒ¼å›é¿**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ“ä½œæ™‚ã®BufferHeightã‚¨ãƒ©ãƒ¼ã‚’é˜²æ­¢
- **ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå®‰å®šåŒ–**: è¤‡é›‘ãªGitå·®åˆ†ã‚³ãƒãƒ³ãƒ‰ã®ç¢ºå®Ÿãªå®Ÿè¡Œ
- **å‡ºåŠ›å®Œå…¨æ€§**: å·®åˆ†çµæœã®å®Œå…¨ãªå–å¾—ãƒ»è¡¨ç¤º

## åŸºæœ¬Gitå·®åˆ†ã‚³ãƒãƒ³ãƒ‰

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã®å–å¾—
```powershell
# æœ€çµ‚ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ã®å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
$changedFiles = git diff --name-only HEAD~1 HEAD
Write-Host "=== å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ ===" -ForegroundColor Cyan
$changedFiles | ForEach-Object { Write-Host "- $_" -ForegroundColor Yellow }

# ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æœªã‚³ãƒŸãƒƒãƒˆå¤‰æ›´
git diff --name-only

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°æ¸ˆã¿å¤‰æ›´
git diff --name-only --staged
```

### å¤‰æ›´çµ±è¨ˆã®å–å¾—
```powershell
# è©³ç´°çµ±è¨ˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åˆ¥è¡Œæ•°ï¼‰
git diff --stat HEAD~1 HEAD

# æ•°å€¤çµ±è¨ˆã®ã¿
git diff --numstat HEAD~1 HEAD

# ç°¡æ½”ãªçµ±è¨ˆ
git diff --shortstat HEAD~1 HEAD
```

### æœŸé–“æŒ‡å®šã®å·®åˆ†å–å¾—
```powershell
# éå»N ã‚³ãƒŸãƒƒãƒˆåˆ†ã®å¤‰æ›´
git diff --name-only HEAD~3 HEAD  # éå»3ã‚³ãƒŸãƒƒãƒˆåˆ†
git diff --name-only HEAD~5 HEAD  # éå»5ã‚³ãƒŸãƒƒãƒˆåˆ†

# ç‰¹å®šã‚³ãƒŸãƒƒãƒˆé–“ã®å·®åˆ†
git diff --name-only [ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥1] [ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥2]

# ç‰¹å®šæ—¥ä»˜ä»¥é™ã®å¤‰æ›´
git diff --name-only --since="2024-01-01" HEAD
```

## æ±ç”¨Gitå·®åˆ†åˆ†æé–¢æ•°

### åŸºæœ¬å¤‰æ›´ã‚µãƒãƒªãƒ¼é–¢æ•°
```powershell
function Get-GitChangesSummary {
    param(
        [int]$CommitRange = 1,
        [string]$FilePattern = "*"
    )
    
    # PSReadLineç„¡åŠ¹åŒ– (è©³ç´°ã¯ [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] å‚ç…§)
    Remove-Module PSReadLine -Force -ErrorAction SilentlyContinue
    
    Write-Host "=== Gitå¤‰æ›´å†…å®¹ã‚µãƒãƒªãƒ¼ ===" -ForegroundColor Cyan
    Write-Host "å¯¾è±¡ç¯„å›²: HEAD~$CommitRange ã‹ã‚‰ HEAD" -ForegroundColor Gray
    
    # 1. å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§
    $changedFiles = git diff --name-only HEAD~$CommitRange HEAD
    if ($FilePattern -ne "*") {
        $changedFiles = $changedFiles | Where-Object { $_ -like $FilePattern }
    }
    
    Write-Host "`nå¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«æ•°: $($changedFiles.Count)" -ForegroundColor Green
    $changedFiles | ForEach-Object { Write-Host "  - $_" -ForegroundColor Yellow }
    
    # 2. å¤‰æ›´çµ±è¨ˆ
    Write-Host "`nå¤‰æ›´çµ±è¨ˆ:" -ForegroundColor Green
    git diff --stat HEAD~$CommitRange HEAD
    
    return $changedFiles
}
```

### ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥åˆ¥åˆ†æé–¢æ•°
```powershell
function Get-GitChangesByFileType {
    param(
        [int]$CommitRange = 1,
        [string[]]$Extensions = @("md", "txt", "json", "yml", "yaml")
    )
    
    # PSReadLineç„¡åŠ¹åŒ– (è©³ç´°ã¯ [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] å‚ç…§)
    Remove-Module PSReadLine -Force -ErrorAction SilentlyContinue
    
    Write-Host "=== ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥åˆ¥å¤‰æ›´åˆ†æ ===" -ForegroundColor Cyan
    
    $allChanges = git diff --name-only HEAD~$CommitRange HEAD
    
    foreach ($ext in $Extensions) {
        $filesOfType = $allChanges | Where-Object { $_ -match "\.$ext$" }
        if ($filesOfType.Count -gt 0) {
            Write-Host "`n.$ext ãƒ•ã‚¡ã‚¤ãƒ« ($($filesOfType.Count)ä»¶):" -ForegroundColor Green
            $filesOfType | ForEach-Object { Write-Host "  - $_" -ForegroundColor Yellow }
        }
    }
    
    # ãã®ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«
    $otherFiles = $allChanges | Where-Object { 
        $file = $_
        -not ($Extensions | Where-Object { $file -match "\.$_$" })
    }
    if ($otherFiles.Count -gt 0) {
        Write-Host "`nãã®ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ« ($($otherFiles.Count)ä»¶):" -ForegroundColor Green
        $otherFiles | ForEach-Object { Write-Host "  - $_" -ForegroundColor Yellow }
    }
}
```

### å¤‰æ›´è¦æ¨¡åˆ†æé–¢æ•°
```powershell
function Get-GitChangesScale {
    param([int]$CommitRange = 1)
    
    # PSReadLineç„¡åŠ¹åŒ– (è©³ç´°ã¯ [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] å‚ç…§)
    Remove-Module PSReadLine -Force -ErrorAction SilentlyContinue
    
    Write-Host "=== å¤‰æ›´è¦æ¨¡åˆ†æ ===" -ForegroundColor Cyan
    
    # çµ±è¨ˆæƒ…å ±å–å¾—
    $stats = git diff --numstat HEAD~$CommitRange HEAD
    $totalAdded = 0
    $totalDeleted = 0
    $fileCount = 0
    
    foreach ($line in $stats) {
        if ($line -match "^(\d+)\s+(\d+)\s+(.+)$") {
            $totalAdded += [int]$matches[1]
            $totalDeleted += [int]$matches[2]
            $fileCount++
        }
    }
    
    Write-Host "`nå¤‰æ›´è¦æ¨¡:" -ForegroundColor Green
    Write-Host "  ãƒ•ã‚¡ã‚¤ãƒ«æ•°: $fileCount" -ForegroundColor White
    Write-Host "  è¿½åŠ è¡Œæ•°: $totalAdded" -ForegroundColor Green
    Write-Host "  å‰Šé™¤è¡Œæ•°: $totalDeleted" -ForegroundColor Red
    Write-Host "  æ­£å‘³å¤‰æ›´: $($totalAdded - $totalDeleted)" -ForegroundColor Yellow
    
    # è¦æ¨¡åˆ¤å®š
    $scale = if ($fileCount -le 2 -and ($totalAdded + $totalDeleted) -le 50) { "è»½å¾®" }
             elseif ($fileCount -le 10 -and ($totalAdded + $totalDeleted) -le 200) { "ä¸­è¦æ¨¡" }
             else { "å¤§è¦æ¨¡" }
    
    Write-Host "  å¤‰æ›´è¦æ¨¡: $scale" -ForegroundColor Magenta
    
    return @{
        FileCount = $fileCount
        Added = $totalAdded
        Deleted = $totalDeleted
        Scale = $scale
    }
}
```

## ç‰¹æ®Šç”¨é€”å‘ã‘åˆ†æé–¢æ•°

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°åˆ¤å®šé–¢æ•°
```powershell
function Test-DocumentUpdateNeeded {
    param(
        [int]$CommitRange = 1,
        [string[]]$DocumentFiles = @("README.md", "CHANGELOG.md", "docs/*.md"),
        [string[]]$SourceExtensions = @("md", "txt", "json", "yml", "yaml")
    )
    
    # PSReadLineç„¡åŠ¹åŒ– (è©³ç´°ã¯ [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] å‚ç…§)
    Remove-Module PSReadLine -Force -ErrorAction SilentlyContinue
    
    Write-Host "=== ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°åˆ¤å®š ===" -ForegroundColor Cyan
    
    # å¤‰æ›´ã•ã‚ŒãŸã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
    $changedFiles = git diff --name-only HEAD~$CommitRange HEAD
    $changedSources = $changedFiles | Where-Object { 
        $file = $_
        $SourceExtensions | Where-Object { $file -match "\.$_$" }
    }
    
    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ç¢ºèª
    $changedDocs = $changedFiles | Where-Object {
        $file = $_
        $DocumentFiles | Where-Object { $file -like $_ }
    }
    
    Write-Host "`nå¤‰æ›´ã•ã‚ŒãŸã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ« ($($changedSources.Count)ä»¶):" -ForegroundColor Green
    $changedSources | ForEach-Object { Write-Host "  - $_" -ForegroundColor Yellow }
    
    Write-Host "`nå¤‰æ›´ã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ($($changedDocs.Count)ä»¶):" -ForegroundColor Green
    $changedDocs | ForEach-Object { Write-Host "  - $_" -ForegroundColor Yellow }
    
    # åˆ¤å®šçµæœ
    $needsUpdate = ($changedSources.Count -gt 0) -and ($changedDocs.Count -eq 0)
    
    if ($needsUpdate) {
        Write-Host "`nğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ãŒå¿…è¦ã§ã™" -ForegroundColor Magenta
        Write-Host "ç†ç”±: ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸãŒã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã¾ã›ã‚“" -ForegroundColor Magenta
    } else {
        Write-Host "`nâœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã¯é©åˆ‡ã§ã™" -ForegroundColor Green
    }
    
    return @{
        NeedsUpdate = $needsUpdate
        ChangedSources = $changedSources
        ChangedDocs = $changedDocs
    }
}
```

## é«˜åº¦ãªGitå·®åˆ†åˆ†æ

### è©³ç´°ãªå¤‰æ›´å†…å®¹ç¢ºèª
```powershell
# ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´å†…å®¹
git diff HEAD~1 HEAD [ãƒ•ã‚¡ã‚¤ãƒ«å]

# å˜èªãƒ¬ãƒ™ãƒ«ã§ã®å·®åˆ†è¡¨ç¤º
git diff --word-diff HEAD~1 HEAD [ãƒ•ã‚¡ã‚¤ãƒ«å]

# ç©ºç™½å¤‰æ›´ã‚’ç„¡è¦–
git diff --ignore-space-change HEAD~1 HEAD

# è¡Œç§»å‹•ã‚’æ¤œå‡º
git diff --color-moved HEAD~1 HEAD
```

### ãƒ–ãƒ©ãƒ³ãƒé–“å·®åˆ†
```powershell
# ãƒ–ãƒ©ãƒ³ãƒé–“ã®å·®åˆ†
git diff main feature-branch

# ãƒãƒ¼ã‚¸ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®å·®åˆ†
git diff $(git merge-base main feature-branch) feature-branch

# ç‰¹å®šãƒ–ãƒ©ãƒ³ãƒã®ç‹¬è‡ªå¤‰æ›´
git diff main...feature-branch
```

## å®Ÿç”¨çš„ãªä½¿ç”¨ä¾‹

### æ—¥å¸¸çš„ãªå¤‰æ›´ç¢ºèª
```powershell
# 1. åŸºæœ¬çš„ãªå¤‰æ›´ç¢ºèª
Get-GitChangesSummary

# 2. ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥åˆ¥ç¢ºèª
Get-GitChangesByFileType

# 3. å¤‰æ›´è¦æ¨¡ã®ç¢ºèª
Get-GitChangesScale

# 4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°åˆ¤å®š
Test-DocumentUpdateNeeded
```

### ç‰¹å®šç”¨é€”ã§ã®ä½¿ç”¨
```powershell
# éå»3ã‚³ãƒŸãƒƒãƒˆåˆ†ã®å¤‰æ›´ç¢ºèª
Get-GitChangesSummary -CommitRange 3

# .mdãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã®å¤‰æ›´ç¢ºèª
Get-GitChangesSummary -FilePattern "*.md"

# ç‰¹å®šæ‹¡å¼µå­ã®å¤‰æ›´åˆ†æ
Get-GitChangesByFileType -Extensions @("md", "mdc", "json")
```

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Gitå·®åˆ†åˆ†ææ™‚ã®ç¢ºèªé …ç›®
- [ ] **ã‚³ãƒŸãƒƒãƒˆç¯„å›²**: é©åˆ‡ãªã‚³ãƒŸãƒƒãƒˆç¯„å›²ã‚’æŒ‡å®šã—ã¦ã„ã‚‹
- [ ] **ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥**: å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
- [ ] **å¤‰æ›´è¦æ¨¡**: å¤‰æ›´è¦æ¨¡ãŒæœŸå¾…ã•ã‚Œã‚‹ç¯„å›²å†…ã§ã‚ã‚‹
- [ ] **å½±éŸ¿ç¯„å›²**: å¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒé©åˆ‡ã«æŠŠæ¡ã•ã‚Œã¦ã„ã‚‹

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°åˆ¤å®šæ™‚ã®ç¢ºèªé …ç›®
- [ ] **ã‚½ãƒ¼ã‚¹å¤‰æ›´ç¢ºèª**: ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´å†…å®¹ã‚’ç¢ºèªæ¸ˆã¿
- [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå¯¾å¿œ**: å¯¾å¿œã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°è¦å¦ã‚’åˆ¤å®šæ¸ˆã¿
- [ ] **æ›´æ–°ç¯„å›²**: å¿…è¦ãªæ›´æ–°ç¯„å›²ã‚’ç‰¹å®šæ¸ˆã¿
- [ ] **æ•´åˆæ€§**: ã‚½ãƒ¼ã‚¹ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´åˆæ€§ã‚’ç¢ºèªæ¸ˆã¿

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- [[004-PowerShellæ“ä½œã‚¬ã‚¤ãƒ‰.mdc]] - PSReadLineç„¡åŠ¹åŒ–ã‚’å«ã‚€PowerShellæ“ä½œã®åŸºæœ¬ã‚¬ã‚¤ãƒ‰
- [[108-Gitæ“ä½œç®¡ç†.mdc]] - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®Gitæ“ä½œç®¡ç†
- [[107-READMEç®¡ç†.mdc]] - READMEæ›´æ–°ã§ã®Gitå·®åˆ†æ´»ç”¨
- [[105-æ¤œè¨¼ãƒ»å“è³ªç®¡ç†.mdc]] - å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã§ã®æ´»ç”¨

## é©ç”¨æ¡ä»¶
- Gitå·®åˆ†ã®åˆ†æãŒå¿…è¦ãªå ´åˆ
- å¤‰æ›´å†…å®¹ã®å¯è¦–åŒ–ãŒå¿…è¦ãªå ´åˆ
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã®åˆ¤å®šãŒå¿…è¦ãªå ´åˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ã®åˆ†æãŒå¿…è¦ãªå ´åˆ
- å“è³ªç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ã§ã®å¤‰æ›´ç¢ºèªæ™‚
